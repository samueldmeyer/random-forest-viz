<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
    <title>A Path to Random Forest</title>

    <!-- Icon links -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="favicon-128.png" sizes="128x128" />
    <meta name="application-name" content="&nbsp;"/>
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="mstile-144x144.png" />
    <meta name="msapplication-square70x70logo" content="mstile-70x70.png" />
    <meta name="msapplication-square150x150logo" content="mstile-150x150.png" />
    <meta name="msapplication-wide310x150logo" content="mstile-310x150.png" />
    <meta name="msapplication-square310x310logo" content="mstile-310x310.png" />

    <!-- CSS  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <link href="css/tree_zoomin.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <link href="css/d3-annotation.css" type="text/css" rel="stylesheet" media="screen,projection"/>

</head>
<body>
    <!-- <nav class="light-blue lighten-1" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo">Logo</a>
    <ul class="right hide-on-med-and-down">
    <li><a href="#">Navbar Link</a></li>
</ul>

<ul id="nav-mobile" class="side-nav">
<li><a href="#">Navbar Link</a></li>
</ul>
<a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
</div>
</nav> -->
<div class="forest-background">
    <div class="container">
        <br><br>
        <h1 class="header center title">A Path to Random Forest</h1>
        <div class="row center">
            <h5 class="header col s12 light white-text">A visual explanation of the random forest algorithm</h5>
        </div>
        <br><br>

    </div>
</div>


<div class="section no-pad-bot">
    <div class="container">
        <!-- <div class="row">
            <div class="main-text col s12 center">
                <img width=200 src="./img/noun_354897_cc.svg" /> -->
                <!-- Allie Tate from Noun Project -->
            <!-- </div>
        </div> -->

        <!-- ****************************************
        ********* Single Tree Introduction **********
        ***************************************** -->
        <div class="row">
            <div class="main-text col offset-s2 s8">
                If you are new to machine learning, you may have already run into "Random Forest". If not, you probably will soon.
                Let us be a guidepost along the way. Now enter the forest.
            </div>
        </div>

        <!-- ****************************************
        *********** The Mushroom Problem ************
        ***************************************** -->
        <div class="row">
            <div class="divider"></div>
            <div class="main-text col s12 center divider-line">
                <h5> The Mushroom Problem </h5>
                <img width="30px" src="./img/mushroom3.svg" />
            </div>
        </div>

        <div class="row">
            <div class="main-text col offset-s2 s8">
                To introduce random forest, we need to start with a real-world example.
                <br>
                <br>
                <i>
                You are lost in the woods, and you are running out of food.
                But you are surrounded by mushrooms. Because you planned ahead, you have a dataset of 8000 kinds of mushrooms and whether they are safe to eat.
                Unfortunately, the latest mushroom you have come across is not in your list,
                so you need to decide whether it is safe to eat based on similarity to other mushrooms.
                The grand problem is:</i><br/><br/>
            </div>

            <div class="main-text col s12 center">
                <h3>
                    Can I eat this mushroom?
                </h3>
                <img src='./img/mushroom2.png' width='200px'/><br/>
            </div>

            <div class="main-text col offset-s2 s8">
                <br/><br/>
                The dataset has 22 descriptors for mushrooms, such as the cap shape, which can be convex, bell, flat, or sunken.
                Similarly, the cap color can be brown, yellow, white, or gray.
                Using all these descriptors, called <i>features</i>
                in machine learning, we will decide if you should eat this mushroom.
            </div>
        </div>

        <!-- ****************************************
        ********* Single Tree Introduction **********
        ***************************************** -->
        <div class="row">
            <div class="divider"></div>
            <div class="main-text col s12 center divider-line">
                <h5> Decision Trees </h5>
                <!-- <img width="30px" src="./img/mushroom3.svg" /> -->
            </div>
        </div>
        <div class="row">
            <div class="main-text col offset-s2 s8">
                To understand random forest, you first need to understand decision trees.
                Random forest builds on top of decision trees.
                <br><br>
                Decision trees predict the value of one feature of a new data point.
                Here, we use them to predict whether or not the new mushroom will be poisonous
                based on the other 22 features.
                To train a decision tree, we give it many examples, and the model tries to
                find which feature can make the best decision on its own. If knowing
                whether the mushroom stalk's surface is the best predictor (without looking at other features),
                the decision tree uses it first. Then after splitting the examples into two categories,
                it looks for which feature is best within each of those categories.<br/><br/>

                The final structure of a trained decision tree looks like a flowchart. It asks a single question about the test item, moves onto the next question based on the answer, and then asks more questions until it reaches a conclusion.<br/><br/>

                Check one out below! Hover over the highlighted circles to see more details about the different components of a decision tree. If you want to know more, check out <a href='http://www.r2d3.us/'>R2D3's Intro to Decision Trees</a>.<br/><br/>
            </div>
        </div>

        <div class="row">
            <div class="main-text col s12 center" id="single_tree">
            </div>
        </div>

        <!-- ****************************************
        ************** Blocks Example ***************
        ***************************************** -->
        <div class="row">
            <div class="main-text col s12 center divider-line">

                <img width="40px" src="./img/blocks1.svg" />
                <h5> Fallacy of Individual Predictors </h5>
                <hr/>

            </div>
        </div>

        <div class="row">
            <div class="main-text col offset-s2 s8">
                The problem with decision trees is that they either have blind spots based on the data that
                was used to create them in the first place.
                Random forest solves this by making a bunch of trees (a forest, also known as an ensemble)
                and combining the results together. <br/> <br/>

                For example, below is a actual outcome we'd like to predict.
            </div>
        </div>

        <div class="row">
            <div class="main-text col offset-s2 s8" id="actual">
            </div>
        </div>

        <div class="row">
            <div class="main-text col offset-s2 s8">
                When we use one predictor, even a pretty good one, sometimes it makes mistakes.
            </div>
        </div>

        <div class="row">
            <div class="main-text col offset-s2 s8" id="predictor_1">
            </div>
        </div>

        <div class="row">
            <div class="main-text col offset-s2 s8">
                A different predictor might give pretty good but slightly different predictions.
            </div>
        </div>

        <div class="row">
            <div class="main-text col offset-s2 s8" id="predictor_2">
            </div>
        </div>

        <div class="row">
            <div class="main-text col offset-s2 s8">
                What if we can combine the power of the individual predictors to minimize our mistakes?
            </div>
        </div>

        <div class="row">
            <div class="main-text col offset-s2 s8" id="predictor_all">
            </div>
        </div>



        <!-- ****************************************
        Training of Individual Trees of Sampled Data
        ***************************************** -->
        <div class="row">
            <div class="main-text col s12 center divider-line">
                <img height="25px" src="./img/grid1.svg" />
                <h5> Training of Trees </h5>
                <hr/>
            </div>
        </div>

        <div class="row">
            <div class="main-text col offset-s2 s8">
                If all trees were trained on exactly the same mushrooms and features, the trees would all be the same,
                so they would all predict the same answer, which wouldn’t be any better than just having one.
                Instead, each tree is given a subset of the data and trained on just that subset.
                As a result, each tree is a specialist in using some subset of the data.

                <br><br>

                Below, we have a table where each row is a mushroom we can use to train our random forest,
                and each column is some feature of the mushroom.
                Only a small part of the table is shown
                (remember that we have 8000 mushrooms and 22 features for each).
                Use the radio buttons below to walk through selecting some data
                and training some trees for the forest.
            </div>
        </div>

        <div class="row">
            <div class="col s3 offset-s2">
                <form action="">
                    <p>
                        <input name="group1" type="radio" id="start-build" checked />
                        <label for="start-build">Start</label>
                    </p>
                    <p>
                        <input name="group1" type="radio" id="data-button" />
                        <label for="data-button">Select Mushrooms</label>
                    </p>
                    <p>
                        <input name="group1" type="radio" id="column-select-option" />
                        <label for="column-select-option">Select Features</label>
                    </p>
                    <p>
                        <input name="group1" type="radio" id="train-tree-button" />
                        <label for="train-tree-button">Train Decision Tree</label>
                    </p>
                </form>
            </div>

            <div class="col s5 main-text" style="color:#9e9e9e" id="step-text">
                Click on "Select Mushrooms" to select some mushrooms for training the first tree.
                They are selected with replacement, so some mushrooms might be included twice.
            </div>
        </div>

        <div id="create-forest" class="row">
            <div id="create-forest-table" class="col s6 no-padding"></div>
            <div class="col s6 no-padding">
                <svg style="width: 500px; height: 400px;"></svg>
            </div>
        </div>

        <!-- ****************************************
        ************** Training Result **************
        ***************************************** -->
        <div class="row">
            <div class="main-text col s12 center divider-line">
                <img height="40px" src="./img/flowchart1.svg" />
                <h5> Training Results </h5>
                <hr/>
            </div>
        </div>

        <div class="row">
            <div class="main-text col offset-s2 s8">
                As each tree is trained on different data, they grow different
                decision paths. Click each tree to see their individual judging
                criteria for if a mushroom is edible or poisonous. You can click
                on blue decision nodes to expand the tree.
            </div>
        </div>

        <div class="row">
            <div class="col s12" id="treelist">
            </div>
            <div class="col s12">
                <div id="collapsible_tree">
                </div>
            </div>
        </div>


        <!-- ****************************************
        ******* Final Prediction with Voting ********
        ***************************************** -->
        <div class="row">
            <div class="main-text col s12 center divider-line">
                <img height="35px" src="./img/trees1.svg" />
                <h5> Making a New Prediction </h5>
                <hr/>
            </div>
        </div>

        <div class="row">
            <div class="main-text col offset-s2 s8">
                If we have a new mushroom the trees have never seen before,
                we can use them to classify it. We let them take a vote,
                and the majority wins. Click on the radio buttons below to walk
                through the process.
            </div>
        </div>
        <div class="row">
          <div class="col s3 offset-s2">
              <form action="">
                  <p>
                      <input name="use-forest-radio" type="radio" id="start-use" checked />
                      <label for="start-use">Start</label>
                  </p>
                  <p>
                      <input name="use-forest-radio" type="radio" id="copies-use" />
                      <label for="copies-use">Send Copies</label>
                  </p>
                  <p>
                      <input name="use-forest-radio" type="radio" id="vote-use" />
                      <label for="vote-use">Vote</label>
                  </p>
                  <p>
                      <input name="use-forest-radio" type="radio" id="end-use" />
                      <label for="end-use">End</label>
                  </p>
              </form>
          </div>
          <div class="col s5 main-text" style="color:#9e9e9e" id="use-step-text">
              Click on "Send Copies" to send copies of the features of the mushroom to each tree.
          </div>
        </div>
        <div id="use-forest" class="row">
            <div class="col s12 center">
                <svg style="width: 1000px; height: 600px;"></svg>
            </div>
        </div>

        <!-- ****************************************
        **************** Conclusion *****************
        ***************************************** -->
        <div class="row">
            <div class="main-text col s12 center divider-line">
                <img height="35px" src="./img/checklist1.svg" />
                <h5> Conclusion </h5>
                <hr/>
            </div>
        </div>

        <div class="row">
            <div class="conclusion col s4 center" id="conclusion1">
                <h5 class="white-text">random</h5>
                <!-- <img src="./img/placeholder_cat1.jpg" /> -->
            </div>
            <div class="conclusion col s4 center" id="conclusion2">
                <h5 class="white-text">forest</h5>
            </div>
            <div class="conclusion col s4 center" id="conclusion3">
                <h5 class="white-text">meow</h5>
            </div>
        </div>
        <div class="row">
            <div class="main-text col offset-s2 s8">
                We hope you now understand machine learning better. If you would like to use this yourself, we used <a href="http://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html">Python's sklearn</a>.
            </div>
        </div>
    </div>
</div>

<footer class="page-footer cyan darken-2">
    <div class="container">
        <div class="row">
            <div class="col l6 s12">
                <h5 class="white-text">Sam and Yiyi</h5>
                <p class="grey-text text-lighten-4">This was made by graduate students at Berkeley School of Information to help people understand more of machine learning.</p>
            </div>
            <div class="col l6 s12">
                <h5 class="white-text">References</h5>
                <ul>
                    <li><a class="white-text" href="#!">Noun Project</a></li>
                    <li><a class="white-text" href="#!">INFO 247</a></li>
                    <li><a class="white-text" href="https://www.flickr.com/photos/aigle_dore/8499155449/in/photolist-dX3oNV-eTLh4M-eGGbYz-eKCw1s-dVkrkt-cwUSTb-6i9K2k-pm6TAS-nvUV3b-njpH2E-ctn9ko-d1k14q-pDwRYr-6YLKpW-6SydKA-d1jW5y-UcMepV-aEsi3d-2eCoWW-d1jV8w-dMMoCc-gJuKg5-gJuRm3-feqrZr-gpwdbQ-eFmBKq-d1jV6U-gJBpMk-bBvZ5j-f1KCHC-gJAvUU-gJuTnA-DDgQGd-RqqxFK-fQRGY5-peUbQF-gJuMvf-6Mxg4P-eRbYNT-9Fcgiz-6H38Rf-6z9nXC-pQqJKV-fDox63-d2sA8j-2eCU5h-72Ew2q-2jqDHG-de41T1-fi21F6/">Cover photo credit</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="footer-copyright">
        <div class="container">
            <p>Enjoy!</p>
        </div>
    </div>
</footer>
<!-- forest by iconsphere from the Noun Project -->

<!-- Need to make sure if we should talk about bagging

Who is consumer?
Talk about

Add explanation of how a single tree does not generalize, or is

Why not just use one tree? Show why this a problem.
More data shown to increase intuition? -->

<!--  Scripts-->
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="js/materialize.js"></script>
<script src="js/init.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.8.0/d3.js"></script>
<script src="js/d3-annotation.js"></script>
<script src="js/tree-zoomin.js"></script>
<script src="js/blocks.js"></script>
<!-- <script src="https://d3js.org/d3.v4.min.js"></script> -->
<script src="js/d3v4jetpack.js"></script>

<script src="js/create-forest.js"></script>
<script src="js/use-forest.js"></script>

</body>
</html>
