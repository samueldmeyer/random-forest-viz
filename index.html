<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
    <title>A Path to Random Forest</title>

    <!-- Icon links -->
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="img/icon/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/icon/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/icon/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/icon/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="60x60" href="img/icon/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="img/icon/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="img/icon/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="img/icon/apple-touch-icon-152x152.png" />
    <link rel="icon" type="image/png" href="img/icon/favicon-196x196.png" sizes="196x196" />
    <link rel="icon" type="image/png" href="img/icon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/png" href="img/icon/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="img/icon/favicon-16x16.png" sizes="16x16" />
    <link rel="icon" type="image/png" href="img/icon/favicon-128.png" sizes="128x128" />
    <meta name="application-name" content="&nbsp;"/>
    <meta name="img/icon/msapplication-TileColor" content="#FFFFFF" />
    <meta name="img/icon/msapplication-TileImage" content="mstile-144x144.png" />
    <meta name="img/icon/msapplication-square70x70logo" content="mstile-70x70.png" />
    <meta name="img/icon/msapplication-square150x150logo" content="mstile-150x150.png" />
    <meta name="img/icon/msapplication-wide310x150logo" content="mstile-310x150.png" />
    <meta name="img/icon/msapplication-square310x310logo" content="mstile-310x310.png" />

    <!-- CSS  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <link href="css/tree_zoomin.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <link href="css/d3-annotation.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <link href="https://fonts.googleapis.com/css?family=Caveat|Copse" rel="stylesheet">

</head>
<body>

    <div class="forest-background">
        <div class="container">
            <br><br>
            <h1 class="header center title">A Path to Random Forest</h1>
            <div class="row center">
                <h5 class="header col s12 light white-text">A visual explanation of the random forest algorithm</h5>
            </div>
            <br><br>

        </div>
    </div>


    <div class="section no-pad-bot">
        <div class="container">

            <!-- ****************************************
            ********* Single Tree Introduction **********
            ***************************************** -->
            <div class="row">
                <div class="main-text col offset-s2 s8">
                    If you are new to machine learning, you may have already run into "Random Forest". If not, you probably will soon.
                    Let us be a guidepost along the way. Now enter the forest.
                </div>
            </div>

            <!-- ****************************************
            *********** The Mushroom Problem ************
            ***************************************** -->
            <div class="row">
                <div class="divider"></div>
                <div class="main-text col s12 center divider-line">
                    <img width="30px" src="./img/mushroom3.svg" />
                    <h4> The Mushroom Problem </h4>
                    <br/>
                </div>
            </div>

            <div class="row">
                <div class="main-text col offset-s2 s8">
                    To introduce random forest, we need to start with a real-world example.
                    <br/>
                    <br/>
                    <i>
                        You are lost in the woods, and you are running out of food.
                        But you are surrounded by mushrooms. Because you planned ahead, you have a dataset of 8000 kinds of mushrooms and whether they are safe to eat.
                        Unfortunately, the latest mushroom you have come across is not in your list,
                        so you need to decide whether it is safe to eat based on similarity to other mushrooms.
                        The grand problem is:
                    </i><br/><br/>
                </div>

                <div class="main-text col s12 center central-question">

                    <p>  Can I eat this mushroom? </p>
                    <img src='./img/mushroom2.png' width='200px'/><br/>
                </div>

                <div class="main-text col offset-s2 s8">
                    <br/><br/>
                    The dataset has 22 descriptors for mushrooms, such as the cap shape, which can be convex, bell, flat, or sunken.
                    Similarly, the cap color can be brown, yellow, white, or gray.
                    Using all these descriptors, called <i>features</i>
                    in machine learning, we will decide if you should eat this mushroom.
                </div>
            </div>

            <!-- ****************************************
            ********* Single Tree Introduction **********
            ***************************************** -->
            <div class="row">
                <div class="divider"></div>
                <div class="main-text col s12 center divider-line">
                    <img width="30px" src="./img/tree1.svg" />
                    <h4> Decision Trees </h4>
                    <br/>
                </div>
            </div>

            <div class="row">
                <div class="main-text col offset-s2 s8">
                    A random forest consists of a collection of decision trees,
                    each of which works like a rule based predictor.<br/><br/>

                    Decision trees predict the label or value, e.g. edible or not,
                     of a new datapoint based on its features.
                    Here, we use decision trees to predict whether or not the new mushroom will be poisonous
                    based on its 22 features, e.g. mushroom cap shape and color.<br/><br/>

                    To train a decision tree, we give it many examples.
                    In the mushroom problem, the model uses the dataset of 8000 mushrooms
                    to find out a sequence of test of features that will best separate
                    edible mushrooms from poisonous ones.

                    If whether a mushroom stalk's surface is smooth or not is the most
                    telling feature of all in helping us predict if the mushroom is edible,
                    the decision tree uses it first. Then for each of the two outcomes,
                    i.e. smooth or not smooth, the decision tree looks for the
                    next best differentiate feature respectively.
                    It keeps doing this iteratively, and only stops
                    either when all the mushrooms left has the same value,
                    e.g. all edible or poisonous,
                    or when it hits some predetermined stop criteria.
                    <br/><br/>

                    The final structure of a trained decision tree looks like a flowchart.
                    It asks a single question about the test item,
                    moves onto the next question based on the answer,
                    and then asks more questions until it reaches a conclusion.<br/><br/>

                    Check one out below! Hover over the highlighted circles to
                    see more details about the different components of a decision tree.
                    If you want to know more, check out
                    <a href='http://www.r2d3.us/'>R2D3's Intro to Decision Trees</a>.
                    <br/><br/>
                </div>
            </div>

            <div class="row">
                <div class="main-text col s12 center" id="single_tree">
                </div>
            </div>

            <!-- ****************************************
            ************** Blocks Example ***************
            ***************************************** -->
            <div class="row">
                <div class="divider"></div>
                <div class="main-text col s12 center divider-line">
                    <img width="40px" src="./img/blocks1.svg" />
                    <h4> Fallacy of Individual Predictors </h4>
                    <br/>
                </div>
            </div>

            <div class="row">
                <div class="main-text col offset-s2 s8">
                    While decision trees are great, they sometimes makes mistakes
                    because they rely too much on the specific dataset they are given,
                    which can be noisy or contains outliers.

                    Random forest helps with this problem this by making a
                    bunch of slightly different trees (a forest, also known as an ensemble)
                    and combining the results together. <br/> <br/>

                    To see how this works, let's consider the following mini made up example,
                    where we use 3 decision trees to predict the edibility of 10 mushrooms. <br/><br/>

                    Below is the actual edibility of the 10 mushrooms -
                    this is what we are trying to predict with our decision trees.
                    In the training process, we know the answer before hand,
                    and we are trying to train the decision tree to
                    give us the same output as the target answer.
                </div>
            </div>

            <div class="row">
                <div class="main-text col offset-s1 s10" id="actual">
                </div>
            </div>

            <div class="row">
                <div class="main-text col offset-s2 s8">
                    Below is the prediction of our 1st example decision tree.
                    It did a pretty good job overall, and only misclassifies the 2nd and 4th mushroom.
                </div>
            </div>

            <div class="row">
                <div class="main-text col offset-s1 s10" id="predictor_1">
                </div>
            </div>

            <div class="row">
                <div class="main-text col offset-s2 s8">
                    Below is the prediction of our 2nd example decision tree.
                    It also gives pretty good but slightly different predictions.
                    Unlike the 1st decision tree, it got the 2nd and 4th mushroom right,
                    but misclassifies the 7th and 9th mushroom.
                </div>
            </div>

            <div class="row">
                <div class="main-text col offset-s1 s10" id="predictor_2">
                </div>
            </div>

            <div class="row">
                <div class="main-text col offset-s2 s8">
                    Now let's add a 3rd example decision tree, which misclassifies the 2nd and 5th mushroom.
                </div>
            </div>

            <div class="row">
                <div class="main-text col offset-s1 s10" id="predictor_3">
                </div>
            </div>

            <div class="row">
                <div class="main-text col offset-s2 s8">
                    What happens if we combine the outputs of all the decision trees?
                    We will take the prediction most trees agree on (majority vote) as the final prediction.
                </div>
            </div>

            <div class="row">
                <div class="main-text col offset-s1 s10" id="predictor_all">
                </div>

            </div>
            <div class="row">
                <div class="main-text col offset-s2 s8">
                <hr/>

            </div>
                <div class="main-text col offset-s1 s10" id="combined_result">
                </div>
            </div>

            <div class="row">
                <div class="main-text col offset-s2 s8">
                    We only misclassified 1 mushroom using the combined result from the trees,
                    50% less error rate than the individual trees! <br/><br/>

                    This is why the random forest algorithm is so powerful.
                    It combines the power of individual decision trees,
                    while at the same time producing more robust results
                    because it's less likely to make mistakes.
                </div>
            </div>
            <!-- ****************************************
            Training of Individual Trees of Sampled Data
            ***************************************** -->
            <div class="row">
                <div class="divider"></div>
                <div class="main-text col s12 center divider-line">
                    <img height="25px" src="./img/grid1.svg" />
                    <h4> Training of Trees </h4>
                    <br/>
                </div>
            </div>

            <div class="row">
                <div class="main-text col offset-s2 s8">
                    If all decision trees were trained on exactly
                    the same mushrooms and features, the trees would all be the same,
                    so they would all predict the same answer,
                    which wouldn’t be any better than just having one.
                    Instead, each tree is given a subset of the data and trained on just that subset.
                    As a result, each decision tree is a specialist in using some subset of the data.

                    <br><br>

                    Below, we have a table where each row is a mushroom we can use to train our random forest,
                    and each column is some feature of the mushroom.
                    Only a small part of the table is shown
                    (remember that we have 8000 mushrooms and 22 features for each).
                    Use the buttons below to walk through selecting some data
                    and training some trees for the forest.
                </div>
            </div>
            <div id="create-forest" class="row">
                <div id="create-forest-table" class="col s6 no-padding"></div>
                <div class="col s6 no-padding">
                    <svg style="width: 500px; height: 400px;"></svg>
                </div>
            </div>
            <div class="row">
              <div class="col s6 offset-s3 main-text center" id="step-text" style="height: 100px">

              </div>
            </div>
            <div class="row">
              <div class="col s12 center">
                <a class="waves-effect waves-light btn disabled" id="create-forest-back">Back</a>
                <a class="waves-effect waves-light btn" id="create-forest-next">Next</a>
              </div>
            </div>


            <!-- ****************************************
            ************** Training Result **************
            ***************************************** -->
            <div class="row">
                <div class="divider"></div>
                <div class="main-text col s12 center divider-line">
                    <img height="40px" src="./img/flowchart1.svg" />
                    <h4> Training Results </h4>
                    <br/>
                </div>
            </div>

            <div class="row">
                <div class="main-text col offset-s2 s8">
                    As each tree is trained on different data, they grow different
                    decision paths. Click each tree to see their individual judging
                    criteria for if a mushroom is edible or poisonous. You can click
                    on blue decision nodes to expand the tree.
                </div>
            </div>

            <div class="row">
                <div class="col s12" id="treelist">
                </div>
                <div class="col s12">
                    <div id="collapsible_tree">
                    </div>
                </div>
                <div class="col s10 tree_legend">
                <img height="40px" src="./img/dt_legend.svg" />
            </div>
            </div>


            <!-- ****************************************
            ******* Final Prediction with Voting ********
            ***************************************** -->
            <div class="row">
                <div class="divider"></div>
                <div class="main-text col s12 center divider-line">
                    <img height="35px" src="./img/trees1.svg" />
                    <h4> Making a New Prediction </h4>
                    <br/>
                </div>
            </div>


            <div class="row">
                <div class="main-text col offset-s2 s8">
                    If we have a new mushroom the trees have never seen before,
                    we can use them to classify it. We let them take a vote,
                    and the majority wins. Click on the buttons below to walk
                    through the process.
                </div>
            </div>
            <div id="use-forest" class="row">
                <div class="col s12 center">
                    <svg></svg>
                </div>
            </div>
            <div class="row">
              <div class="col s6 offset-s3 main-text center" id="use-step-text" style="height: 60px">

              </div>
            </div>
            <div class="row">
              <div class="col s12 center">
                <a class="waves-effect waves-light btn disabled" id="use-forest-back">Back</a>
                <a class="waves-effect waves-light btn" id="use-forest-next">Next</a>
              </div>
            </div>

            <!-- ****************************************
            **************** Conclusion *****************
            ***************************************** -->
            <div class="row">
                <div class="divider"></div>
                <div class="main-text col s12 center divider-line">
                    <img height="35px" src="./img/checklist1.svg" />
                    <h4> Checklist </h4>
                    <br/>
                </div>
            </div>

            <div class="row">
                <div class="main-text col offset-s2 s8">
                    To bring it home, below are the three key characteristics of the random forest model.
                </div>
            </div>

            <div class="row">
                <div class="conclusion col s4 center">
                    <div class="conclusion-icon">
                        <img width="100px" src="./img/blocks2.svg" />
                    </div>
                    A random forest is an ensemble of decision tree predictors.
                </div>
                <div class="conclusion col s4 center">
                    <div class="conclusion-icon">
                        <img height="90px" src="./img/grid2.svg" />
                    </div>
                    Each decision tree is trained using a random subset of the training data.
                </div>
                <div class="conclusion col s4 center">

                    <div class="conclusion-icon">
                        <img height="90px" src="./img/trees2.svg" />
                    </div>

                    The final output is the majority vote of the outputs of member decision trees.
                </div>
            </div>
            <div class="row">
                <div class="main-text col offset-s2 s8">
                    We hope you now understand the random forest algorithm better. If you would like to use this yourself, we used <a href="http://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html">Python's sklearn</a>.
                </div>
            </div>
        </div>
    </div>

    <footer class="page-footer blue-grey lighten-2">
        <div class="container">
            <div class="row">
                <div class="col l6 s12">
                    <h6 class="white-text">Sam and Yiyi</h6>
                    <p class="grey-text text-lighten-4">We are graduate students at Berkeley School of Information passionate about helping people understand and fall in love with machine learning.</p>
                </div>
                <div class="col l6 s12">
                    <h6 class="white-text">References</h6>
                    <ul>
                        <li><a class="white-text" href="https://thenounproject.com/icon/990340/">Amanita by Alex Muravev from the Noun Project</a></li>
                        <li><a class="white-text" href="https://thenounproject.com/naripuru/collection/trees/">Trees by parkjisun from the Noun Project</a></li>
                        <li><a class="white-text" href="https://thenounproject.com/icon/301156">Tree by Giuditta Valentina Gentile from the Noun Project</a></li>
                        <li><a class="white-text" href="https://thenounproject.com/icon/28576/">Tetris by Emily L from the Noun Project</a></li>
                        <li><a class="white-text" href="https://thenounproject.com/icon/973799/">Mushroom by sai aditya from the Noun Project</a></li>
                        <li><a class="white-text" href="https://thenounproject.com/icon/969343/">Grid view by Ralf Schmitzer from the Noun Project</a></li>
                        <li><a class="white-text" href="https://thenounproject.com/icon/204494/">Draft by Chameleon Design from the Noun Project</a></li>
                        <li><a class="white-text" href="https://thenounproject.com/icon/881127/">Trees by Tjaša Kimovec from the Noun Project</a></li>
                        <li><a class="white-text" href="https://thenounproject.com/icon/813562/">Checklist by Gregor Cresnar from the Noun Project</a></li>
                        <li><a class="white-text" href="https://thenounproject.com/naripuru/collection/trees/">Trees collection by parkjisun from the Noun Project</a></li>
                        <li><a class="white-text" href="http://pngimg.com/download/3201">Mushroom image</a></li>
                        <li><a class="white-text" href="https://www.flickr.com/photos/aigle_dore/8499155449/in/album-72157632855274264/">Forest image by Moyan Brenn</a></li>
                        <li><a class="white-text" href="#!">INFO 247</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-copyright">
            <div class="container">
                Made with &#x2764; by Sam and Yiyi from UC Berkeley<br/>
            </div>
        </div>
    </footer>


    <!-- Mushroom by Daria Moskvina from the Noun Project 867068 https://thenounproject.com/dasska/collection/mushroom/-->

    <!-- Need to make sure if we should talk about bagging

    Who is consumer?
    Talk about

    Add explanation of how a single tree does not generalize, or is

    Why not just use one tree? Show why this a problem.
    More data shown to increase intuition? -->

    <!--  Scripts-->
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="js/materialize.js"></script>
    <script src="js/init.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.8.0/d3.js"></script>
    <script src="js/d3-annotation.js"></script>
    <script src="js/tree-zoomin.js"></script>
    <script src="js/blocks.js"></script>
    <!-- <script src="https://d3js.org/d3.v4.min.js"></script> -->
    <script src="js/d3v4jetpack.js"></script>

    <script src="js/create-forest.js"></script>
    <script src="js/use-forest.js"></script>

</body>
</html>
